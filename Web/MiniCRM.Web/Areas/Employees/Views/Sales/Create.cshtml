@model MiniCRM.Web.ViewModels.Sales.IndexSalesCreateViewModel
@{
    var products = Model.ProductsList.Select(x => new SelectListItem(x.Name, x.Id.ToString()));

}


<link href="~/lib/slim-select/slimselect.min.css" rel="stylesheet" />
<script src="~/lib/slim-select/slimselect.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<link href="~/plugins/bs-stepper/css/bs-stepper.min.css" rel="stylesheet" />
<div class="row">
    <div class="col-md-12">
        <div class="card card-default">
            <div class="card-header">
                <h3 class="card-title">Add your sale</h3>
            </div>
            <div class="card-body p-0">
                <div class="bs-stepper">
                    <div class="bs-stepper-header" role="tablist">

                        <div class="step" data-target="#logins-part">
                            <button type="button" class="step-trigger" role="tab" aria-controls="logins-part" id="logins-part-trigger">
                                <span class="bs-stepper-circle">1</span>
                                <span class="bs-stepper-label">Choose products</span>
                            </button>
                        </div>
                        <div class="line"></div>
                        <div class="step" data-target="#information-part">
                            <button type="button" class="step-trigger" role="tab" aria-controls="information-part" id="information-part-trigger">
                                <span class="bs-stepper-circle">2</span>
                                <span class="bs-stepper-label">Add quantity</span>
                            </button>
                        </div>
                    </div>
                    <div class="bs-stepper-content">

                        <div id="logins-part" class="content" role="tabpanel" aria-labelledby="logins-part-trigger">

                            <select id="demo" asp-items="products" asp-for="SelectedIDs" multiple>
                            </select>

                            <button class="btn btn-primary" id="btnNext" onclick="stepper.next()">Next</button>
                        </div>
                        <div id="information-part" class="content" role="tabpanel" aria-labelledby="information-part-trigger">
                            <form asp-area="Employees" asp-controller="Sales" asp-action="Create" method="post">
                                <div id="container"></div>
                                <button type="submit" class="btn btn-primary">Submit</button>
                            </form>
                            <button class="btn btn-primary" id="btnPrevious" onclick="stepper.previous()">Previous</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

<script src="~/plugins/bs-stepper/js/bs-stepper.min.js"></script>



<script>

    document.addEventListener('DOMContentLoaded', function () {
        window.stepper = new window.Stepper(document.querySelector('.bs-stepper'));
    });


</script>
<script>
    var slim = new SlimSelect({
        select: '#demo',
        placeholder: "Choose product to add",
        searchText: "It is not available product",
        searchPlaceholder: "Search for available product"

    })

</script>


<script type="text/javascript">
    $(function () {
        $("#btnNext").click(function () {
            var ids = $("#demo").val();
            var customerId = @Model.Sale.CustomerId;
            $.ajax({
                type: "post",
                url: "/Employees/Sales/SaleProductPartial",
                data: { "ids": ids, "customerId": customerId },
                success: function (result) {
                    $("#container").append(result);
                },
                error: function (ex) {
                    alert("Error");
                }
            });
        });
    });
</script>
<script type="text/javascript">
    $(function () {
        $("#btnPrevious").click(function () {

            $("#container").empty();

        });
    });
</script>
